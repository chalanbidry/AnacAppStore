<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition>
        <!-- Datatables Block -->
        <!-- Datatables is initialized in js/pages/uiTables.js -->
        <div jsf:id="detailsCourrier" class="modal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <form jsf:id="detailsCourrierDialogForm" jsf:prependId="false">
                        <div class="modal-header" style="border-bottom:1px solid #ffcccc;">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="blue bigger" style="color: #ff6666;">#{bundle.detailCourrier} </h4>
                        </div>
                        <div class="row tabbable">

                            <div class="col-sm-2 " >

                                <ul class="nav nav-tabs tabs-left" id="myTab3" style="width: 10em;">
                                    <li class="active">
                                        <a data-toggle="tab" href="#home3">
                                            <i class="pink ace-icon fa fa-tachometer bigger-110" style="color: #ff6666;"></i>
                                            #{bundle.Courrier}
                                        </a>
                                    </li>

                                    <li>
                                        <a data-toggle="tab" href="#profile3">
                                            <i class="blue ace-icon fa fa-user bigger-110" style="color:#3399ff;"></i>
                                            #{bundle.Evenement}
                                        </a>
                                    </li>
                                    <li>
                                        <a data-toggle="tab" href="#profile4">
                                            <i class="blue ace-icon fa fa-paperclip bigger-110" style="color:#3399ff;"></i>
                                            #{bundle.note}
                                        </a>
                                    </li>

                                </ul>
                                <!--                                <div style=" width: 10em; border-right: 1px solid #ddd; margin-top: -2px;"></div>-->
                            </div>
                            <div class="col-sm-10">
                                <div class="tab-content" style=" margin-left: -1em;">
                                    <div id="home3" class="tab-pane active">
                                        <div class="row">
                                            <div class="col-sm-12" style="border: 0px solid black">
                                                <div class="" >
                                                    <div class="widget-body">

                                                        <div class="" >

                                                            <table class="table table-striped table-bordered table-vcenter">


                                                                <tbody>
                                                                    <tr>
                                                                        <td style="font-weight:bold;" >Exercice</td>
                                                                        <td>#{courrierBean.selectedCourrier.exercice.libelle}</td>
                                                                    </tr>

                                                                    <tr>
                                                                        <th style="font-weight:bold;">Utilisateur à l'origine</th>
                                                                        <th>#{courrierBean.selectedCourrier.initiateur.fonction.libelle}</th>
                                                                    </tr>

                                                                    <tr>
                                                                        <td style="font-weight:bold;" >Référence du courrier</td>
                                                                        <td>
                                                                            <ul class="reference">
                                                                                <li>
                                                                                    N°______
                                                                                </li>
                                                                                /
                                                                                <li>
                                                                                    ANAC
                                                                                </li>
                                                                                /
                                                                                <li>

                                                                                    MIT
                                                                                </li>/

                                                                                <ui:repeat value="#{courrierBean.listCourrier_Dir}" var="dir" varStatus="status">
                                                                                    <li> 

                                                                                        <div class="push-bit">
                                                                                            <small> #{dir.userVisa.fonction.departementDirec.code}</small>
                                                                                        </div>
                                                                                    </li><label jsf:rendered="#{((status.index)+1)!= courrierBean.listCourrier_Dir.size()}">-</label>

                                                                                </ui:repeat>
                                                                                /
                                                                                <ui:repeat value="#{courrierBean.listCourrier_ChefSer}" var="ser" varStatus="status">
                                                                                    <li>

                                                                                        <div class="push-bit">
                                                                                            <small>  #{ser.userVisa.fonction.service.code}</small>
                                                                                        </div>

                                                                                    </li><label jsf:rendered="#{((status.index)+1)!= courrierBean.listCourrier_ChefSer.size()}">-</label>
                                                                                </ui:repeat>
                                                                                /
                                                                                <li jsf:rendered="#{courrierBean.listCourrier_ChefDiv.size() != 0}">
                                                                                    <ui:repeat value="#{courrierBean.listCourrier_ChefDiv}" var="divi">
                                                                                        <div class="push-bit">
                                                                                            <small>  #{divi.userVisa.fonction.division.code}</small>
                                                                                        </div>
                                                                                    </ui:repeat>

                                                                                </li>



                                                                                /<li>

                                                                                    SA

                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>

                                                                    <tr>
                                                                        <td style="font-weight:bold;" >Catégorie de courrier</td>
                                                                        <td>#{courrierBean.selectedCourrier.typeCourrier.categorieCourrier.label}</td>
                                                                    </tr>

                                                                    <tr>
                                                                        <td style="font-weight:bold;">Type de courrier</td>
                                                                        <td>#{courrierBean.selectedCourrier.typeCourrier.libelle}</td>
                                                                    </tr>

                                                                    <tr jsf:rendered="#{courrierBean.selectedCourrier.withObjet}">
                                                                        <td style="font-weight:bold;" >Objet</td>
                                                                        <td>#{courrierBean.selectedCourrier.objet}</td>
                                                                    </tr>

                                                                    <tr jsf:rendered="#{courrierBean.selectedCourrier.withObjet}">
                                                                        <td style="font-weight:bold;" >Destinataire</td>
                                                                        <td>
                                                                            <center>
                                                                                <table style="border:1px solid black;" class="table table-striped table-bordered table-vcenter">
                                                                                    <tbody>
                                                                                        <ui:repeat value="#{courrierBean.selectedCourrier.destinataires}" var="desti">
                                                                                            <tr>
                                                                                                <td>#{desti}</td>

                                                                                            </tr>
                                                                                        </ui:repeat>
                                                                                    </tbody>
                                                                                </table>
                                                                            </center>
                                                                        </td>
                                                                    </tr>

                                                                    <tr>
                                                                        <td style="font-weight:bold;">Statut</td>
                                                                        <td class="bolder">#{courrierBean.findReferenceFromPgCour(courrierBean.selectedCourrier).statut}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="font-weight:bold;">Position actuelle</td>
                                                                        <td>#{courrierBean.findReferenceFromPgCour(courrierBean.selectedCourrier).userReceive.fonction.code}<!--le serrvice courant--></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="font-weight:bold;">Date d'initiation du courrier</td>
                                                                        <td>#{connexionBean.convertDate(courrierBean.selectedCourrier.dateCourrier,"dd-MM-yyyy")}</td>
                                                                    </tr>

                                                                    <tr>
                                                                        <td style="font-weight:bold;">Date de création</td>
                                                                        <td>#{connexionBean.convertDate(courrierBean.selectedCourrier.dateCreation,"dd-MM-yyyy")}</td>
                                                                    </tr>

                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>

                                    </div><!--home-->

                                    <div id="profile3" class="tab-pane">                                          
                                        <div class="widget-body">

                                            <div style="margin-left: 2em; margin-top: 1em; margin-bottom: 1em; width:50em;">
                                                <table jsf:id="table-courrier-evenement" class="table table-striped table-bordered table-vcenter" >
                                                    <thead>
                                                        <tr>
                                                            <th style="color:#3399ff;">Numero</th>
                                                            <th style="color:#3399ff;">Evenements</th>
                                                            <th style="color:#3399ff;">Utilisateur</th>
                                                            <th style="color:#3399ff;">Date</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody>
                                                        <ui:repeat value="#{courrierBean.findListEvenCourrier(courrierBean.selectedCourrier)}" var="item" varStatus="status">
                                                            <tr>
                                                                <td>#{(status.index)+1}</td>
                                                                <td>#{item.evenement.libelle}</td>
                                                                <td>#{item.userSend.fonction.code}</td>
                                                                <td>#{connexionBean.convertDate(item.dateCreation,"dd-MM-yyyy")}</td>
                                                            </tr>
                                                        </ui:repeat>
                                                    </tbody>
                                                </table>
                                            </div>




                                        </div>
                                    </div>
                                    <div id="profile4" class="tab-pane">
                                           <table class="table table-striped">
                                       
                                        <tbody>
                                            <ui:repeat value="#{notificationBean.someCourrierByCourrier(courrierBean.selectedCourrier)}" var="notif"> 
                                                <tr jsf:rendered="#{notif.type=='correction'}" class="danger">
                                                <td class="text-center" >
                                                    <div class="push-bit">
                                                        <a href="#">
                                                            <img src="#{request.contextPath}/resources/img/placeholders/avatars/avatar5.jpg" alt="avatar" class="img-circle"/>
                                                        </a>
                                                         <span data-toggle="tooltip" title="I agree to the terms!"></span>
                                                    </div>
                                                    <small jsf:rendered="#{connexionBean.currentUser!=notif.sender}">(#{notif.sender.fonction.code})</small>
                                                    <small jsf:rendered="#{connexionBean.currentUser==notif.sender}">(Vous)</small>
                                                </td>
                                                <td>
                                                    <p>#{notif.note}</p>
                                                </td>
                                                <td class="text-center">
                                                    <div class="push-bit">
                                                        <a href="#">
                                                            <img src="#{request.contextPath}/resources/img/placeholders/avatars/avatar5.jpg" alt="avatar" class="img-circle"/>
                                                        </a>
                                                         <span data-toggle="tooltip" title="I agree to the terms!"></span>
                                                    </div>
                                                    <small jsf:rendered="#{connexionBean.currentUser!=notif.receiver}">(#{notif.receiver.fonction.code})</small>
                                                    <small jsf:rendered="#{connexionBean.currentUser==notif.receiver}">(Vous)</small>
                                                </td>
                                            </tr>
                                                 <tr jsf:rendered="#{notif.type!='correction'}" class="info">
                                                <td class="text-center" >
                                                    <div class="push-bit">
                                                        <a href="#">
                                                            <img src="#{request.contextPath}/resources/img/placeholders/avatars/avatar5.jpg" alt="avatar" class="img-circle"/>
                                                        </a>
                                                         <span data-toggle="tooltip" title="I agree to the terms!"></span>
                                                    </div>
                                                   <small jsf:rendered="#{connexionBean.currentUser!=notif.sender}">(#{notif.sender.fonction.code})</small>
                                                    <small jsf:rendered="#{connexionBean.currentUser==notif.sender}">(Vous)</small>
                                                </td>
                                                <td>
                                                    <p>#{notif.note}</p>
                                                </td>
                                                <td class="text-center">
                                                    <div class="push-bit">
                                                        <a href="#">
                                                            <img src="#{request.contextPath}/resources/img/placeholders/avatars/avatar5.jpg" alt="avatar" class="img-circle"/>
                                                        </a>
                                                         <span data-toggle="tooltip" title="I agree to the terms!"></span>
                                                    </div>
                                              <small jsf:rendered="#{connexionBean.currentUser!=notif.receiver}">(#{notif.receiver.fonction.code})</small>
                                                    <small jsf:rendered="#{connexionBean.currentUser==notif.receiver}">(Vous)</small>
                                                </td>
                                            </tr>
                                            </ui:repeat>
                                        </tbody>
                                           </table>
                                    </div>



                                </div>
                                #{courrierBean.reNullCourrier()}
                            </div><!-- /.col -->


                        </div><!-- /.row -->
                        <div class="modal-footer">


                            <button class="btn btn-default btn-lg active" style="line-height: 1.5; font-size: 12px; padding: 5px 10px;" data-dismiss="modal" >
                                <i class="ace-icon fa fa-times"></i>
                                #{bundle.Close}
                            </button>

                        </div>

                    </form>
                </div>
            </div>
        </div>
        <!-- END Datatables Block -->

        <script>
//            $(function () {
//                $('#functions-datatable').dataTable({
//                    columnDefs: [{orderable: false, targets: [4]}],
//                    pageLength: 10,
//                    lengthMenu: [[5, 10, 20], [5, 10, 20]]
//                });
//            });
        </script>
    </ui:composition>
</html>
