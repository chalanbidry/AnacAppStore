<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:composition template="./../../template/base.xhtml">
        <ui:define name="selectedMenu">

            <ui:param name="BoiteReceptionClass" value="active"/> 
        </ui:define>
        <ui:define name="css">
            <style>
                #menu ul{
                    list-style: none;
                }
                #menu li{
                    display: inline;
                }
                .p1{
                    display: inline;
                }
                .repeat{
                    display: initial;
                }

                .sm{
                    display: initial;
                }
                .reference{padding:8px 15px;margin-bottom:20px;list-style:none;border-radius:4px}
                .reference>li{display:inline-block}

            </style>
        </ui:define>
        <ui:define name="content">
            <ui:include src="list.xhtml"/>
            <ui:include src="confirmEnvoiChefService.xhtml"/>
            <ui:include src="MiseEnCopie.xhtml"/>
            <ui:include src="../detail.xhtml"/>
            <ui:include src="AddPJ.xhtml"/>
            <ui:include src="confirmReference.xhtml"/>
            <ui:include src="confirmArchivage.xhtml"/>
            <ui:include src="confirmGiveDG.xhtml"/>
            <ui:include src="confirmSignPysique.xhtml"/>
            <ui:include src="Correction.xhtml"/>
            <ui:include src="DemCorrection.xhtml"/>
            <ui:include src="ConfirmEnvoiDG.xhtml"/>
            <ui:include src="FicheAnnotation.xhtml"/>
            <ui:include src="ConfirmTerminer.xhtml"/>
            <ui:include src="../detailCA.xhtml"/>


        </ui:define>
        <ui:define name="script">
            <!-- ckeditor.js, load it only in the page you would like to use CKEditor (it's a heavy plugin to include it with the others!) -->
            <script src="#{request.contextPath}/resources/js/plugins/ckeditor/ckeditor.js"></script> 
            <!-- Load and execute javascript code used only in this page -->
            <script src="#{request.contextPath}/resources/js/pages/formsComponents.js"></script> 
            <script src="#{request.contextPath}/resources/js/pages/formsWizard.js"></script>
            <script src="#{request.contextPath}/resources/js/ace-elements.min.js"></script>
            <script src="#{request.contextPath}/resources/js/pages/compNestable.js"></script>


            <script src="#{request.contextPath}/resources/js/plugins.js"></script>


            <!-- Load and execute javascript code used only in this page -->
            <!--<script src="#{request.contextPath}/resources/js/pages/custumForsetiPenal.js"></script>--> 
            <!-- jQuery, Bootstrap, jQuery plugins and Custom JS code -->

            <!-- Load and execute javascript code used only in this page -->
            <script>


                $(function () {
                    FormsComponents.init();
                });

                $('#page-preview').addClass('hide');

                $(function () {
                    UiTables.init('#DataTableID', 6);
                    UiTables.init('#DataTableIDElement', 5);
                    UiTables.init('#DataTableConfirmElement', 4);
                    tohtml();
                    UiTables.init('#DataTableDoc', 5);

//                    UiTables.init('#boiteReception', 3);
                });
                $(function () {
                    CompNestable.init();
                });
                $(function () {
                    UiProgress.init();
                });
                $(function () {
                    FormsWizard.init();
                });

                function global() {
                    initialiserChosenSelect();
                }

                function startWaitMe(element) {
                    $('#waitforme').waitMe({
                        effect: 'timer',
                        text: 'Patientez un peu svp...',
                        bg: 'rgba(255,255,255,0.7)',
                        color: '#000',
                        sizeW: '',
                        sizeH: '',
                        source: ''
                    });
                }

                function stopWaitMe(element) {
                    $('#waitforme').waitMe('hide');
                }

                function savedemande(data) {
                    if (data.status === "begin") {
                        startWaitMe("#submit_new");
                    }
                    if (data.status === "complete") {
                        stopWaitMe("#submit_new");
                    }
                    if (data.status === "success") {
                        initialiserChosenSelect();
                        UiTables.init('#DataTableID', 6);
                    }
                }


                function retourEnvoiBon(data) {
                    if (data.status === "begin") {
                        startWaitMe("#waitforme");
                    }
                    if (data.status === "complete") {
                        stopWaitMe("#waitforme");
                    }
                    if (data.status === "success") {
                        initialiserChosenSelect();
                        UiTables.init('#DataTableID', 6);
                    }
                }

                function editdemande(data) {

                    if (data.status === "success") {
                        initialiserChosenSelect();
                        UiTables.init('#DataTableID', 2);
                    }
                }
                function deletedemande(data) {

                    if (data.status === "success") {
                        initialiserChosenSelect();
                        UiTables.init('#DataTableID', 2);
                    }
                }

                function afficheDetail(data) {
                    if (data.status === "begin") {
                        startWaitMe('#block');
                    }
                    if (data.status === "complete") {
                        stopWaitMe('#block');
                    }
                    if (data.status === "success") {
                        UiTables.init('#table-demande-evenement', 2);
                        UiTables.init('#table2-Bon-evenement', 2);
                    }
                }

                function selectDemande(data) {
                    if (data.status === "begin") {
                        startWaitMe('#waitforme');
                    }
                    if (data.status === "complete") {
                        stopWaitMe('#waitforme');
                    }
                    if (data.status === "success") {
                        initialiserChosenSelect();
                    }
                }
                function reinitChosen(data) {
//                    alert('dfdsgs');
                    if (data.status === "begin") {
                        startWaitMe('#createDemandeForm');
                    }
                    if (data.status === "complete") {
                        stopWaitMe('#createDemandeForm');
                    }
                    if (data.status === "success") {
                        try {
                            initialiserChosenSelect();
                            initialiserParDefaut();
                            UiTables.init('#DataTableConfirmElement', 4);

                        } catch (err) {
                        }
                    }
                }

                function reinitChosen2(data) {
//                    alert('dfdsgs');
                    if (data.status === "begin") {
                        startWaitMe('#createDemandeForm');
                    }
                    if (data.status === "complete") {
                        stopWaitMe('#createDemandeForm');
                    }
                    if (data.status === "success") {
                        try {
                            initialiserChosenSelect();
                            initialiserParDefaut();
                            UiTables.init('#DataTableIDElement', 5);


                        } catch (err) {
                        }
                    }
                }

                function ajaxOnEventNouveauDossier(data) {
                    if (data.status === "begin") {
                        startWaitMe('#createDemandeForm');

                    }
                    if (data.status === "complete") {
                        stopWaitMe('#createDemandeForm');

                    }
                    if (data.status === "success") {
                        UiTables.init('#DataTableID', 6);
                        try {
                            initialiserChosenSelect();
                            FormsWizard.init();

                        } catch (err) {
                        }
                    } else {
                        try {
                            FormsWizard.init();
                            initialiserChosenSelect();

                        } catch (err) {
                        }
                    }
                }


                function execute_Ajax() {
                    $('#next2').click();
                }

                function startWaitMeGlobal(element) {
                    $("#JSF-message-composite").waitMe({
                        effect: 'timer',
                        text: 'Patientez un peu...',
                        bg: 'rgba(255,255,255,0.7)',
                        color: '#000',
                        sizeW: '',
                        sizeH: '',
                        source: ''
                    });
                }

                function stopWaitMeGlobal(element) {
                    $("#JSF-message-composite").waitMe('hide');
                }

                function compositeCourrier(data) {
                    if (data.status === "begin") {
                        startWaitMeGlobal("#JSF-message-composite");
                    }
                    if (data.status === "complete") {
                        stopWaitMeGlobal("#JSF-message-composite");
                    }
                    if (data.status === "success") {
                        try {
                            AppEmail.init();
                        } catch (err) {
                        }
                    }
                }

                function confirmations(data) {
                    if (data.status === "begin") {
                        startWaitMe("#boiteReception");
                    }
                    if (data.status === "complete") {
                        stopWaitMe("#boiteReception");
                    }
                    if (data.status === "success") {
                        initialiserChosenSelect();
                        initializeDate();

                    }
                }

                function checkInstruction(data) {
                    if (data.status === "begin") {
                        startWaitMe("#AnnotationForm");
                    }
                    if (data.status === "complete") {
                        stopWaitMe("#AnnotationForm");
                    }
                    if (data.status === "success") {

                    }
                }

                function correction(data) {
                    if (data.status === "begin") {
                        startWaitMe("#boiteReception");

                    }
                    if (data.status === "complete") {
                        stopWaitMe("#boiteReception");
                    }
                    if (data.status === "success") {

                        CKEDITOR.instances.editor2.setData(document.getElementById('editorValue2').value);
                        document.getElementById('editorValue2').value = "";
                    }
                }



                function viewCourrier(data) {
                    if (data.status === "begin") {
                        startWaitMe("#boiteReception");
                    }
                    if (data.status === "complete") {
                        stopWaitMe("#boiteReception");
                    }
                    if (data.status === "success") {
                        initialiserChosenSelect();
                        tohtml();
                        UiTables.init('#DataTableDoc', 5);
                        $('#page-preview').addClass('hide');
                    }
                }
                
                
                function addDelai(data) {
                    if (data.status === "begin") {
                        startWaitMe("#boiteReception");
                        
                    }
                    if (data.status === "complete") {
                        stopWaitMe("#boiteReception");
                    }
                    if (data.status === "success") {
                       initializeDate()
                    }
                }
                



                function tohtml() {

                    var d = $('#contenuWrite');
                    d.html(d.text());
                }

                function showDetail(data) {
                    if (data.status === "begin") {
                        startWaitMe("#waitforme");

                    }
                    if (data.status === "complete") {
                        stopWaitMe("#waitforme");
                    }
                    if (data.status === "success") {
                        UiTables.init('#table-courrier-evenement', 3);

                    }
                }


                function showDetailCouArr(data) {
                    if (data.status === "begin") {
                        startWaitMe("#waitforme");

                    }
                    if (data.status === "complete") {
                        stopWaitMe("#waitforme");
                    }
                    if (data.status === "success") {
                        try {
                            CompNestable.init();


                        } catch (err) {
                        }


                    }
                }



                $('#btn-back').click(function () {
                    $('#page-preview').addClass('hide');
                });
                $('#viewDoc').click(function () {

                    $('#page-preview').removeClass('hide');
                });
                jQuery(function ($) {


                    $('#page-preview').addClass('hide');





                });

                function ajaxOnEventOuvrir(data) {
                    if (data.status === "begin") {
                        startWaitMe();
                    }
                    if (data.status === "complete") {
                        stopWaitMe();
                    }
                    if (data.status === "success") {
                        try {
                        } catch (err) {
                        }
                    }
                }

                function initializeDate() {
                    $('.date-picker').datepicker({
                        todayBtn: "linked",
                        language: "fr",
                        autoclose: true,
                        todayHighlight: true
                    });
                    $('.input-datepicker').datepicker({
                        todayBtn: "linked",
                        language: "fr",
                        autoclose: true,
                        todayHighlight: true
                    });
                }

            </script>

            <script type="text/javascript">
                CKEDITOR.replace('editor1',
                        {
                            uiColor: '#ECE8DA'
                        });
                CKEDITOR.replace('editor2',
                        {
                            uiColor: '#ECE8DA'
                        });
            </script>
        </ui:define>
    </ui:composition>
</html>
