<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition>
        <!-- Datatables Block -->
        <!-- Datatables is initialized in js/pages/uiTables.js -->
        <form jsf:id="ContenuForm" role="form"  jsf:prependId="false"  class="center-table"> 
            <div jsf:rendered="#{(!courrierBean.listPageEnvoiActive and  !courrierBean.listDocActive) and courrierBean.selectedProgressionCourrier.courrier.typeCourrier.categorieCourrier != categorieCourrierBean.categorieCourrierArrive}">
                <div class="col-md-1"></div>
                <div class="block col-md-9" style="box-shadow: 1px 1px 1px 1px lightgray;">



                    <div id="message-view" class="block-section " >
                        <!-- Title -->

                        <div class="block-title clearfix">


                            <div class="block-options pull-right">
                                <h:panelGroup rendered="#{courrierBean.findIfVisa(connexionBean.currentUser,courrierBean.selectedProgressionCourrier.courrier)}">

                                    <h:commandLink class="btn  btn-success"  title="Mise en copie" onclick="$('#miseEnCopieDialog').modal('show')" rendered="#{courrierBean.findIfAlredyVisa().viser and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser}">
                                        <i class="fa fa-paper-plane"></i>
                                        &nbsp;Mise en copie
                                        <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":miseEnCopieDialogForm" onevent="confirmations"/>
                                    </h:commandLink>
                                    <h:commandLink class="btn  btn-success"  title="Visa"  rendered="#{!courrierBean.findIfAlredyVisa().viser and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser}">
                                        <i class="fa fa-pencil"></i>
                                        &nbsp;Viser le courrier
                                        <f:ajax  listener="#{courrierBean.visaUser()}" render=":ContenuForm" onevent="viewCourrier"/>
                                    </h:commandLink>
                                    <h:commandLink class="btn  btn-success"  title="Supprimer visa"  rendered="#{courrierBean.findIfAlredyVisa().viser and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser}">
                                        <i class="fa fa-pencil"></i>
                                        &nbsp;Supprimer visa
                                        <f:ajax  listener="#{courrierBean.delVisaUser()}" render=":ContenuForm" onevent="viewCourrier"/>
                                    </h:commandLink>
                                </h:panelGroup>

                                <h:commandLink class="btn  btn-success"  title="Visa"  rendered="#{courrierBean.findIfSignataire(connexionBean.currentUser,courrierBean.selectedProgressionCourrier.courrier) and !courrierBean.findIfAlredySign().signer and  courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser}">
                                    <i class="fa fa-pencil"></i>
                                    &nbsp;Signer le courrier
                                    <f:ajax  listener="#{courrierBean.signaUser()}" render=":ContenuForm" onevent="viewCourrier"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Visa"  rendered="#{courrierBean.findIfSignataire(connexionBean.currentUser,courrierBean.selectedProgressionCourrier.courrier) and courrierBean.findIfAlredySign().signer and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser}">
                                    <i class="fa fa-pencil"></i>
                                    &nbsp;Supprimer la signature
                                    <f:ajax  listener="#{courrierBean.delsignaUser()}" render=":ContenuForm" onevent="viewCourrier"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Ajouter une pièce jointe" onclick="$('#AddPjDialog').modal('show')" rendered="#{connexionBean.currentUser.fonction.code=='SA' and courrierBean.selectedProgressionCourrier.courrier.numCour!=null and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).statut!='Archivé'}">
                                    <i class="fa fa-paperclip"></i>
                                    &nbsp;Pièce Jointe
                                    <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":AddPjDialogForm" onevent="confirmations"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Ajouter une pièce jointe" onclick="$('#AddPjDialog').modal('show')" rendered="#{courrierBean.selectedProgressionCourrier.courrier.initiateur==connexionBean.currentUser and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).statut!='Archivé'}">
                                    <i class="fa fa-paperclip"></i>
                                    &nbsp;Pièce Jointe
                                    <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":AddPjDialogForm" onevent="confirmations"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Attribuer un numero" onclick="$('#confirmReferenceDialog').modal('show')" rendered="#{connexionBean.currentUser.fonction.code=='SA' and courrierBean.selectedProgressionCourrier.courrier.numCour==null}">
                                    <i class="fa fa-paperclip"></i>
                                    &nbsp;Attribuer un numéro
                                    <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":confirmReferenceDialogForm" onevent="confirmations"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Archiver" onclick="$('#confirmArchiveDialog').modal('show')" rendered="#{connexionBean.currentUser.fonction.code=='SA' and courrierBean.selectedProgressionCourrier.courrier.numCour!=null and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).statut!='Archivé'}">
                                    <i class="fa fa-archive "></i>
                                    &nbsp;Archiver
                                    <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render="confirmArchiveDialogForm" onevent="confirmations"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Envoyer le courrier" onclick="$('#confirmSendChefServiceDialog').modal('show')" rendered="#{(courrierBean.findIfAlredyVisa().viser || courrierBean.findIfAlredySign().signer) and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser}">
                                    <i class="fa fa-paper-plane"></i>
                                    &nbsp;Envoyer
                                    <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":confirmSendChefServiceDialogForm" onevent="confirmations"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Envoyer le courrier" onclick="$('#myModalCorrection').modal('show')" rendered="#{courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).statut!='Archivé'}">
                                    <i class="fa fa-pencil"></i>
                                    &nbsp;Correction
                                    <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":CorrectionForm:editorValue2" onevent="correction"/>
                                </h:commandLink>
                                <h:commandLink class="btn  btn-success"  title="Envoyer le courrier" onclick="$('#DemCorrectionDialog').modal('show')" rendered="#{courrierBean.selectedProgressionCourrier.courrier.initiateur!=connexionBean.currentUser and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser and  courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).statut!='Archivé'}">
                                    <i class="fa fa-pencil"></i>
                                    &nbsp;Demande de Correction
                                    <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":DemCorrectionDialogForm" onevent="correction"/>
                                </h:commandLink>
                                <h:panelGroup rendered="#{connexionBean.currentUser.fonction.code=='SP' and courrierBean.findReferenceFromPgCour(courrierBean.selectedProgressionCourrier.courrier).userReceive==connexionBean.currentUser }">
                                    <h:panelGroup rendered="#{courrierBean.selectedProgressionCourrier.courrier.typeSignature == null}">
                                        <div class="btn-group">
                                            <a href="javascript:void(0)" data-toggle="dropdown" class="btn btn-success dropdown-toggle" aria-expanded="false">Signature <span class="caret"></span></a>
                                            <ul class="dropdown-menu  text-left">

                                                <li>

                                                </li>
                                                <li>
                                                    <h:commandLink title="détail"  onclick="$('#confirmGiveDGDialog').modal('show')">
                                                        Numérique
                                                        <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":confirmGiveDGDialogForm" onevent="showDetail"/>
                                                    </h:commandLink>
                                                </li>
                                                <li>
                                                    <h:commandLink title="Contenu" onclick="$('#confirmSignPhysiqueDialog').modal('show')">
                                                        Physique
                                                        <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render="confirmSignPhysiqueDialogForm" onevent="showDetail"/>
                                                    </h:commandLink>
                                                </li>
                                            </ul>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{courrierBean.selectedProgressionCourrier.courrier.typeSignature == 'Physique'}">
                                        <div class="btn-group">
                                            <a href="javascript:void(0)" data-toggle="dropdown" class="btn btn-success dropdown-toggle" aria-expanded="false">Impression <span class="caret"></span></a>
                                            <ul class="dropdown-menu  text-left">

                                                <li>

                                                </li>
                                                <li>
                                                    <a target="_blank" onclick="window.print()">

                                                        Courrier
                                                    </a>
                                                </li>
                                                <li>
                                                    <h:commandLink title="Contenu">
                                                        Pièces Jointes
                                                        <f:ajax listener="#{courrierBean.passCourrierViewDoc(courrierBean.selectedProgressionCourrier)}" render=":msgForm:msg @form :listeCourrierForm :listeDocForm" onevent="viewCourrier"/>
                                                    </h:commandLink>
                                                </li>
                                            </ul>
                                        </div>
                                    </h:panelGroup>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{connexionBean.currentUser.fonction.code != 'SP'}">
                                    <a class="btn  btn-success"  title="imprimer le courrier" target="_blank" onclick="window.print()">
                                        <i class="fa fa-print"></i>
                                        &nbsp;Imprimer
                                    </a>
                                </h:panelGroup>
                            </div>
                            <div class="block-options pull-left">
                                <a href="/AnacAppStore/GestionCourrier/BoiteReception/index.xhtml"  class="btn btn-effect-ripple btn-default">
                                    <i class="fa fa-chevron-left"></i>                                
                                    #{bundle.BoiteReception}

                                </a>
                            </div>

                        </div>

                        <!-- END Title -->

                        <!-- Header -->




                        <div id="divPrint">

                            <div class="row">
                                <div jsf:id="tabIntioAndDate">
                                    <img src="#{request.contextPath}/resources/images/enteAnac.jpg"  alt="entete" style="width: 59.3em; height: 8em;"/>
                                    <table border="0" cellpadding="0" cellspacing="0" style="width:945px">
                                        <tbody>
                                            <tr>
                                                <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{courrierBean.findInitiauxRecepEnvoi()}</td>
                                                <td>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COTONOU, LE #{connexionBean.convertDate(courrierBean.selectedProgressionCourrier.courrier.dateCourrier, 'dd-MM-yyyy')}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <p>&nbsp;</p>

                                <table border="0" cellpadding="0" cellspacing="0" style="width:945px; margin-left: 2em;" jsf:id="tabRef">
                                    <tbody>
                                        <tr>
                                            <td style="height:94px; width:349px">
                                                <p>



                                                    <div>

                                                        <ul class="reference">
                                                            <li>
                                                                N°_<label style="font-family: Castellar;">#{courrierBean.selectedProgressionCourrier.courrier.numCour}_</label>
                                                            </li>
                                                            /
                                                            <li>
                                                                ANAC
                                                            </li>
                                                            /
                                                            <li>

                                                                MIT
                                                            </li>/

                                                            <ui:repeat value="#{courrierBean.listCourrier_Dir}" var="dir" varStatus="status">
                                                                <li> 

                                                                    <div class="push-bit">
                                                                        <img src="#{request.contextPath}/resources/AllVisa/#{dir.userVisa.fonction.code}.gif"  alt="dd" style="width: 2em; height: 2em; margin-right: -2em;" jsf:rendered="#{dir.viser}"/><br/>
                                                                        <small> #{dir.userVisa.fonction.departementDirec.code}</small>
                                                                    </div>
                                                                </li><label jsf:rendered="#{((status.index)+1)!= courrierBean.listCourrier_Dir.size()}">-</label>

                                                            </ui:repeat>
                                                            /
                                                            <ui:repeat value="#{courrierBean.listCourrier_ChefSer}" var="ser" varStatus="status">
                                                                <li>

                                                                    <div class="push-bit">
                                                                        <img src="#{request.contextPath}/resources/AllVisa/#{ser.userVisa.fonction.code}.gif"  alt="dd"  style="width: 2em; height: 2em; margin-right: -2em;" jsf:rendered="#{ser.viser}"/><br/>
                                                                        <small>  #{ser.userVisa.fonction.service.code}</small>
                                                                    </div>

                                                                </li><label jsf:rendered="#{((status.index)+1)!= courrierBean.listCourrier_ChefSer.size()}">-</label>
                                                            </ui:repeat>
                                                            /
                                                            <li jsf:rendered="#{courrierBean.listCourrier_ChefDiv.size() != 0}">
                                                                <ui:repeat value="#{courrierBean.listCourrier_ChefDiv}" var="divi">
                                                                    <div class="push-bit">
                                                                        <img src="#{request.contextPath}/resources/AllVisa/#{divi.userVisa.fonction.code}.gif" alt="dd" style="width: 2em; height: 2em; margin-right: -2em;" jsf:rendered="#{divi.viser}"/><br/>
                                                                        <small>  #{divi.userVisa.fonction.division.code}</small>
                                                                    </div>
                                                                </ui:repeat>

                                                            </li>



                                                            /<li>

                                                                SA

                                                            </li>
                                                        </ul>
                                                    </div>


                                                </p>

                                            </td>
                                            <td style="height:94px; width:349px">
                                                <p>&nbsp;</p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <strong jsf:id="titreObAndTire" style="margin-left: 2em;"><label style="font-family: Chaparral Pro Light; font-size: 26px;" jsf:rendered="#{courrierBean.selectedProgressionCourrier.courrier.withObjet and courrierBean.selectedProgressionCourrier.courrier.withTitre}">&nbsp; #{courrierBean.selectedProgressionCourrier.courrier.typeCourrier.libelle}</label></strong>
                                <p>&nbsp;</p>

                                <div jsf:id="divIfObjet" >
                                    <table border="0"  cellpadding="0" cellspacing="0" style="width:888px; margin-left: -2.5em;" jsf:id="tabDesti" jsf:rendered="#{courrierBean.selectedProgressionCourrier.courrier.withObjet}">
                                        <tbody>
                                            <tr>
                                                <td style="height:107px; width:600px;">
                                                    <p>&nbsp;</p>
                                                </td>
                                                <td style="height:107px;">
                                                    <table style="margin-top: -5px;">
                                                        <tr>
                                                            <td style="width: 21em;">LE DIRECTEUR GENERAL</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 5em;">&nbsp; &nbsp; &nbsp; &nbsp;A </td>
                                                        </tr>
                                                        <tr jsf:rendered="#{courrierBean.selectedProgressionCourrier.courrier.destinataires.size() == 1}">
                                                            <td>MONSIEUR</td>
                                                        </tr>
                                                        <tr jsf:rendered="#{courrierBean.selectedProgressionCourrier.courrier.destinataires.size() > 1}">
                                                            <td>MESSIEURS</td>
                                                        </tr>
                                                        <ui:repeat value="#{courrierBean.selectedProgressionCourrier.courrier.destinataires}" var="desti">
                                                            <tr>
                                                                <td style="width: 5em;"><strong> - &nbsp; #{desti}</strong></td>
                                                            </tr>
                                                        </ui:repeat>
                                                        <tr jsf:rendered="#{courrierBean.selectedProgressionCourrier.courrier.withTelDesti}">
                                                            <td style="width: 5em;"><u>tel</u>: #{courrierBean.selectedProgressionCourrier.courrier.teldestinataire}</td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 5em;"><u>COTONOU</u></td>
                                                        </tr>
                                                    </table>
                                                      <!--<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="font-size:14px"> &nbsp; &nbsp;LE DIRECTEUR GENERAL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;<strong>&nbsp;Mr/Mm &nbsp; </strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel:#{courrierBean.selectedProgressionCourrier.courrier.teldestinataire} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<u>COTONOU</u></span></p>-->
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <table border="0" cellpadding="0" cellspacing="0" style="width:945px; margin-left: 2em;" jsf:id="tabObjet" jsf:rendered="#{courrierBean.selectedProgressionCourrier.courrier.withObjet}">
                                        <tbody>
                                            <tr>
                                                <td style="height:94px; width:349px">
                                                    <p style="font-family: Times New Roman; font-size: 21px;"><strong><u>Objet</u>:</strong> #{courrierBean.selectedProgressionCourrier.courrier.objet}</p>
                                                </td>
                                                <td style="height:94px; width:349px">
                                                    <p>&nbsp;</p>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="form-group row" jsf:id="DivTitre">

                                <div class="col-sm-12" jsf:rendered="#{courrierBean.selectedProgressionCourrier.courrier.withTitre and !courrierBean.selectedProgressionCourrier.courrier.withObjet}">

                                    <center> <strong><label style="font-family: Chaparral Pro Light; font-size: 26px;"><u>#{courrierBean.selectedProgressionCourrier.courrier.typeCourrier.libelle}</u></label></strong></center>
                                </div>

                            </div>
                            <div id="contenuWrite" style="margin-left: 2em;">
                                #{courrierBean.selectedProgressionCourrier.courrier.contenu}
                            </div>
                            <div class="row" jsf:id="signataires">

                                <ui:repeat value="#{courrierBean.findSignataires()}" var="list">
                                    <div style="height: 5em; " class="col-sm-6 col-lg-3 pull-right">
                                        <center jsf:rendered="#{list.signer and list.courrier.typeSignature=='Numerique'}"> <img src="#{request.contextPath}/resources/AllSigns/#{list.utilisateur.fonction.code}.png" alt="signature manquante du DG " style="height: 7em; width: 15em; margin-top: -5em;" jsf:rendered="#{list.signer and list.courrier.typeSignature=='Numerique'}"/></center>
                                        <center jsf:rendered="#{list.signer and list.courrier.typeSignature=='Physique'}"><label style="margin-top: -5em; color: red;" class="animation-pulse">Signature Physique</label> </center>
                                        <center><label style="margin-top:1em;"><u>#{list.utilisateur.prenom} #{list.utilisateur.nom}</u></label></center>
                                    </div>
                                </ui:repeat>



                            </div>
                            <div class="row" style="margin-top: 15em;">
                                <img class="pull-right" src="#{request.contextPath}/resources/AllQRcode/#{courrierBean.selectedProgressionCourrier.courrier.code}.png"  style=" margin-top: -5em; margin-right: 5em;"/> 
                            </div>
                        </div>




                        <!-- END Message Body -->

                        <!-- Attachments Row -->
                        <!--                        <div class="row block-section">
                                                    <div class="col-xs-6 col-sm-3 col-lg-2 text-center">
                                                        <a href="img/placeholders/photos/photo2.jpg" data-toggle="lightbox-image">
                                                            <img src="img/placeholders/photos/photo2.jpg" alt="photo" class="img-responsive push-bit"/>
                                                        </a>
                                                        <span class="text-muted">IMG0001.JPG</span>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-lg-2 text-center">
                                                        <a href="img/placeholders/photos/photo16.jpg" data-toggle="lightbox-image">
                                                            <img src="img/placeholders/photos/photo16.jpg" alt="photo" class="img-responsive push-bit"/>
                                                        </a>
                                                        <span class="text-muted">IMG0002.JPG</span>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-lg-2 text-center">
                                                        <a href="img/placeholders/photos/photo9.jpg" data-toggle="lightbox-image">
                                                            <img src="img/placeholders/photos/photo9.jpg" alt="photo" class="img-responsive push-bit"/>
                                                        </a>
                                                        <span class="text-muted">IMG0003.JPG</span>
                                                    </div>
                                                    <div class="col-xs-6 col-sm-3 col-lg-2 text-center">
                                                        <a href="img/placeholders/photos/photo15.jpg" data-toggle="lightbox-image">
                                                            <img src="img/placeholders/photos/photo15.jpg" alt="photo" class="img-responsive push-bit"/>
                                                        </a>
                                                        <span class="text-muted">IMG0004.JPG</span>
                                                    </div>
                                                </div>-->
                        <!-- END Attachments Row -->

                        <!-- Quick Reply Form -->

                        <!-- END Quick Reply Form -->

                    </div>



                </div>
                <div class="col-md-2"></div>
            </div>
            <br/>
            <div jsf:rendered="#{(!courrierBean.listPageEnvoiActive and  !courrierBean.listDocActive) and courrierBean.selectedProgressionCourrier.courrier.typeCourrier.categorieCourrier == categorieCourrierBean.categorieCourrierArrive}">
                <div class="row"> 
                    <div class="col-md-1"></div>
                    <div class="block col-md-10" style="box-shadow: 1px 1px 1px 1px lightgray;">



                        <div id="message-view" class="block-section " >
                            <!-- Title -->

                            <div class="block-title clearfix">
                                <div class="block-options pull-left">
                                    <a href="/AnacAppStore/GestionCourrier/BoiteReception/index.xhtml"  class="btn btn-effect-ripple btn-default">
                                        <i class="fa fa-chevron-left"></i>                                
                                        #{bundle.BoiteReception}

                                    </a>
                                   

                                </div>
                                <div class="pull-right">
                                     <h:commandLink title="Télécharger" class="btn btn-primary" action="#{gedBean.telechargerDocumentReyno(courrierBean.findDocumentCourrierArrive(courrierBean.selectedProgressionCourrier.courrier))}">Télécharger <i class="fa fa-cloud-download"></i>  </h:commandLink>
                                      
                                                                  
                                                              
                                </div>
                            </div>
                            <div class="row">
                                <center>
                                    <div class="col-md-8" >

                                        <ui:include src="enteteApercuCourrier.xhtml" />
                                    </div>

                                    <div class="col-md-4" jsf:rendered="#{connexionBean.currentUser.fonction.code!='SA' and connexionBean.currentUser.fonction.code!='DG'}">
                                        <div class="form-group">
                                            <div class="col-sm-12" style="padding-top: 10px;padding-left:10px;padding-right:10px" jsf:id="divTabInfoInstruction">
                                                <fieldset  class="col-sm-12" style="border: 1px solid #dae0e8;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px; padding-top: 0px; width: 100%; ">
                                                    <legend jsf:rendered="#{connexionBean.currentUser.directeur}" style="border: 1px solid lightgray; padding-top: 3px;padding-bottom:2px"><center>Instructions du DG</center></legend>
                                                    <legend jsf:rendered="#{connexionBean.currentUser.chefService}" style="border: 1px solid lightgray; padding-top: 3px;padding-bottom:2px"><center>Instructions du #{connexionBean.userDirecteur.fonction.code}</center></legend>
                                                    <legend jsf:rendered="#{connexionBean.currentUser.fonction.chefDivision}" style="border: 1px solid lightgray; padding-top: 3px;padding-bottom:2px"><center>Instructions du #{connexionBean.userChefService.fonction.code}</center></legend>
                                                    <table class="table table-striped">

                                                        <tbody>
                                                            <tr class="info">
                                                                <td class="text-center" >
                                                                    <div class="push-bit">
                                                                        <a href="#">
                                                                            <img src="#{request.contextPath}/resources/img/placeholders/avatars/avatar5.jpg" alt="avatar" class="img-circle" style="width: 3em; height: 3em;"/>
                                                                        </a>
                                                                        <span data-toggle="tooltip" title="I agree to the terms!"></span>
                                                                    </div>
                                                                    <small jsf:rendered="#{connexionBean.currentUser.directeur}">DG</small>
                                                                    <small jsf:rendered="#{connexionBean.currentUser.chefService}">#{connexionBean.userDirecteur.fonction.code}</small>
                                                                    <small jsf:rendered="#{connexionBean.currentUser.fonction.chefDivision}">#{connexionBean.userChefService.fonction.code}</small>

                                                                </td>
                                                                <td>
                                                                    <p>
                                                                        <strong>Instruction :</strong> <br/>
                                                                        #{courrierBean.selectedProgressionCourrier.instructions}
                                                                        <br/>
                                                                        <strong>Observation :</strong> <br/>
                                                                        #{courrierBean.selectedProgressionCourrier.observation}
                                                                        <h:panelGroup rendered="#{connexionBean.currentUser.chefService and courrierBean.selectedProgressionCourrier.dateLimite != null}">
                                                                        <br/>
                                                                        <strong><i class="fa fa-clock-o"></i> &nbsp;Délai :</strong><br/>
                                                                        #{courrierBean.getPgFromDelai(courrierBean.selectedProgressionCourrier.courrier)}
                                                                        </h:panelGroup>
                                                                         
                                                                    </p>
                                                                </td>

                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </fieldset>
                                            </div>
                                        </div>
                                    </div>
                                </center>
                            </div>
                            <br/><br/>
                            <div class="row">
                                <fieldset  class="col-sm-12" style="border: 1px solid #dae0e8;border-bottom-right-radius: 10px;border-bottom-left-radius: 10px; padding-top: 0px; width: 100%; ">
                                    <legend style="border: 1px solid lightgray; padding-top: 3px;padding-bottom:2px">
                                        <center> Contenu du Courrier</center>

                                    </legend>
                                    <br/>
                                    <div class="row"> 
                                        <!--name="textarea-ckeditor"-->

                                        <object jsf:id="previewCourArr" type="#{gedBean.mineType}" data="data:#{gedBean.mineType};base64,#{gedBean.content}" style="min-height: 700px; width: 100%" ></object>

                                    </div>
                                    <br/>
                                </fieldset>
                            </div>
                            <br/><br/>
                            <div class="row">
                                <center>
                                    <h:commandLink class="btn btn-primary"  onclick="$('#confirmSendDGDialog').modal('show')" rendered="#{!courrierBean.findIfAlredySend(courrierBean.selectedProgressionCourrier)}">
                                        <i class="fa fa-user"></i>
                                        &nbsp;
                                        Envoyer le courrier au DG
                                        <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":confirmSendDGDialogForm" onevent="confirmations"/>
                                    </h:commandLink>



                                    <h:commandLink class="btn btn-primary"  onclick="$('#modalAnnotation').modal('show')" rendered="#{courrierBean.findIfAlredySend(courrierBean.selectedProgressionCourrier) and connexionBean.currentUser.fonction.code!='SA' and !connexionBean.currentUser.fonction.chefDivision}">
                                        <i class="fa fa-user"></i>
                                        &nbsp;
                                        Traitement du Courrier
                                        <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":AnnotationForm" onevent="confirmations"/>
                                    </h:commandLink>
                                    &nbsp;
                                    <h:panelGroup rendered="#{!connexionBean.currentUser.secretaireAdministratif and !connexionBean.currentUser.dg}">
                                        <a class="btn btn-danger" href="/AnacAppStore/GestionCourrier/EditerCourrier/index.xhtml?cour=#{courrierBean.selectedProgressionCourrier.courrier.code}">  
                                            <i class="fa fa-folder-open-o"></i>                                       
                                            Editer nouveau courrier
                                        </a>
                                    </h:panelGroup>
                                    &nbsp;
                                    <h:commandLink class="btn btn-warning"  onclick="$('#confirmTerminerDialog').modal('show')" rendered="#{courrierBean.findIfAlredySend(courrierBean.selectedProgressionCourrier) and connexionBean.currentUser.fonction.code!='SA'}">
                                        <i class="fa fa-user"></i>
                                        &nbsp;
                                        Terminer le traitement
                                        <f:ajax listener="#{courrierBean.passItem(courrierBean.selectedProgressionCourrier)}" render=":AnnotationForm" onevent="confirmations"/>
                                    </h:commandLink>
                                </center>
                            </div>

                        </div>
                    </div>
                    <div class="col-md-1"></div>
                </div>

            </div>

        </form>
        <!-- END Datatables Block -->
    </ui:composition>
</html>
